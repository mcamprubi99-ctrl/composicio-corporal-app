<!DOCTYPE html>
<html lang="ca">
<head>
    <meta charset="UTF-8">
    <title>Registre ComposiciÃ³ Corporal</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            max-width: 600px;
            margin: auto;
        }
        h1 {
            text-align: center;
        }
        input, button {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            font-size: 16px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 25px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: center;
        }
        th {
            background: #f0f0f0;
        }
        .delete-btn {
            background: red;
            color: white;
            border: none;
            padding: 5px 10px;
            cursor: pointer;
        }
    </style>
</head>

<body>
    <h1>ðŸ“Š Registre Corporal</h1>

    <h3>Nova entrada</h3>

    <label>Data</label>
    <input type="date" id="data">

    <label>Pes (kg)</label>
    <input type="number" step="0.1" id="pes">

    <label>% Greix</label>
    <input type="number" step="0.1" id="greix">

    <label>% Aigua</label>
    <input type="number" step="0.1" id="aigua">

    <label>% MÃºscul</label>
    <input type="number" step="0.1" id="muscul">

    <label>% Ossos</label>
    <input type="number" step="0.1" id="ossos">

    <label>Notes</label>
    <input type="text" id="notes">

    <button onclick="guardar()">ðŸ’¾ Guardar entrada</button>

    <h3>Historial</h3>
    <table>
        <thead>
            <tr>
                <th>Data</th>
                <th>Pes</th>
                <th>% Greix</th>
                <th>% Aigua</th>
                <th>% MÃºscul</th>
                <th>% Ossos</th>
                <th>Notes</th>
                <th></th>
            </tr>
        </thead>
        <tbody id="taula"></tbody>
    </table>

    <script>
        function carregar() {
            const dades = JSON.parse(localStorage.getItem("registre") || "[]");
            const taula = document.getElementById("taula");
            taula.innerHTML = "";

            dades.forEach((fila, index) => {
                const tr = document.createElement("tr");

                fila.forEach(value => {
                    const td = document.createElement("td");
                    td.innerText = value;
                    tr.appendChild(td);
                });

                const eliminar = document.createElement("button");
                eliminar.innerText = "X";
                eliminar.className = "delete-btn";
                eliminar.onclick = () => esborrar(index);

                const tdBtn = document.createElement("td");
                tdBtn.appendChild(eliminar);
                tr.appendChild(tdBtn);

                taula.appendChild(tr);
            });
        }

        function guardar() {
            const data = document.getElementById("data").value;
            const pes = document.getElementById("pes").value;
            const greix = document.getElementById("greix").value;
            const aigua = document.getElementById("aigua").value;
            const muscul = document.getElementById("muscul").value;
            const ossos = document.getElementById("ossos").value;
            const notes = document.getElementById("notes").value;

            if (!data || !pes) {
                alert("Cal posar com a mÃ­nim la data i el pes!");
                return;
            }

            const novaFila = [data, pes, greix, aigua, muscul, ossos, notes];
            const dades = JSON.parse(localStorage.getItem("registre") || "[]");

            dades.push(novaFila);
            localStorage.setItem("registre", JSON.stringify(dades));

            carregar();
        }

        function esborrar(index) {
            const dades = JSON.parse(localStorage.getItem("registre") || "[]");
            dades.splice(index, 1);
            localStorage.setItem("registre", JSON.stringify(dades));
            carregar();
        }

        carregar();
    </script>
</body>
</html>
